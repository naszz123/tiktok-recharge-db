<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f4f4f4;
    }

    /* MENU TITIK 3 */
    .menu-wrapper {
      position: fixed;
      top: 12px;
      left: 12px;
      z-index: 9999;
    }

    .menu-btn {
      background: rgba(0,0,0,0.65);
      color: white;
      border: none;
      font-size: 22px;
      padding: 8px 11px;
      border-radius: 10px;
      cursor: pointer;
      backdrop-filter: blur(6px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.25);
    }

    .menu-box {
      display: none;
      background: rgba(255,255,255,0.92);
      border-radius: 10px;
      box-shadow: 0 6px 30px rgba(0,0,0,0.25);
      margin-top: 6px;
      padding: 10px 14px;
      width: 170px;
      backdrop-filter: blur(10px);
    }

    .menu-box a {
      display: block;
      padding: 10px 0;
      color: #222;
      font-weight: 700;
      text-decoration: none;
    }

    .menu-box a:hover { color: #ff2a5f; }

    /* CONTAINER */
    .container {
        max-width: 600px;
        margin: 80px auto;
        padding: 20px;
        background: white;
        border-radius: 14px;
        box-shadow: 0 6px 30px rgba(0,0,0,0.1);
    }

    h2 {
        margin-top: 0;
    }

    input, select {
        width: 100%;
        padding: 10px;
        margin: 6px 0;
        border-radius: 8px;
        border: 1px solid #ccc;
    }

    button {
        width: 100%;
        padding: 10px;
        border: none;
        background: #ff2a5f;
        color: white;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 10px;
    }

    button:hover {
        background: #d81c4d;
    }
</style>
</head>

<body>

<!-- MENU TITIK 3 -->
<div class="menu-wrapper">
  <button class="menu-btn" onclick="toggleMenu()">â‹®</button>
  <div class="menu-box" id="menuBox">
      <a href="index.html">Home</a>
      <a href="#" onclick="logout()">Logout</a>
  </div>
</div>

<div class="container">
    <h2>Admin Panel</h2>

    <h3>Tambah User Baru</h3>

    <input type="text" id="username" placeholder="Username">

    <input type="password" id="password" placeholder="Password">

    <select id="role">
        <option value="User">User</option>
        <option value="Admin">Admin</option>
        <option value="Developer">Developer</option>
    </select>

    <button onclick="addUser()">Tambah User</button>

    <p id="status"></p>
</div>

<script>
function toggleMenu(){
  const box = document.getElementById('menuBox');
  box.style.display = box.style.display === 'block' ? 'none' : 'block';
}

function logout(){
  localStorage.removeItem("user");
  window.location.href = "login.html";
}

// ========== API ADD USER (ADMIN ONLY) ===========
async function addUser(){
    let username = document.getElementById("username").value.trim();
    let password = document.getElementById("password").value.trim();
    let role = document.getElementById("role").value;

    if(!username || !password){
        document.getElementById("status").innerText = "Harap isi semua field!";
        return;
    }

    let res = await fetch("/api/add-user", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({username,password,role})
    });

    let data = await res.json();
    document.getElementById("status").innerText = data.message;
}
</script>

</body>
</html>
